<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Portfolio Vale Alvarez</title>

		<link rel="stylesheet" href="Public/index.css">

    <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@v0.163.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@v0.163.0/examples/jsm/"
        }
      }
    </script>
    
	</head>
    <link rel="preload" href="Images/CocinaDiaVideo.mp4" as="video" type="video/mp4">
    <body>
      <!-- Overlay aviso orientaci√≥n -->
      <div id="rotateMessage">
        <div class="message-box">
          <p>üì± Para una mejor experiencia, gira tu dispositivo en posici√≥n horizontal.</p>
        </div>
      </div>
       <div id="page-wrapper">
      <!-- Pantalla de carga -->
      <div id="preloader">
        <div class="loader"></div>
        <p>Cargando portafolio...</p>
      </div>
      <div class="Fondo-Inicio">
        <video id="themeVideo" autoplay loop muted playsinline>
          <source src="Images/CocinaNocheVideo.mp4" type="video/mp4">
          <!-- Fallback: imagen si no soporta video -->
          <img src="Images/imagennoche.png" alt="Noche de fondo">
        </video>
        <img src="Images/3dartist.png" class="threedartist">
        <img src="Images/PortfoliTitle.png" class="Titul">
        <img src="Images/OTitle.png" class="Titulo">
        <img src="Images/Sol.png" class = LunaSol id="themeToggle">
        <div class="About-Me">
          <p></p>
          <img src="Images/Sobremi.png" class="SobremiText">
          <img src="Images/SobreMiText.png" class="SobremiTexto">
          <img src="Images/ValeFoto.png" class="ValeFoto">
          <div class="contenedor-blender">
            <img src="Images/BlenderLogo.png" class="Blender">
            <img src="Images/CuatroEstrellas.png" class="estrellas-Blender">
            <img src="Images/habilidadesBlender.png" class="habilidades-Blender">
          </div>
          <div class="contenedor-substance">
            <img src="Images/Substance.png" class="Substance">
            <img src="Images/CuatroEstrellas.png" class="estrellas-Substance">
            <img src="Images/habilidadesSubstance.png" class="habilidades-Substance">
          </div>
          <div class="contenedor-Clip">
            <img src="Images/Clip.png" class="Clip">
            <img src="Images/CuatroEstrellas.png" class="estrellas-Clip">
            <img src="Images/habilidadesClip.png" class="habilidades-Clip">
          </div>

          <img src="Images/EchesTitle.png" class="EchoesTitle">
          <img src="Images/EchoesText.png" class="EchoesTexto">
          <div class="video-container-echoes">
            <iframe 
              src="https://www.youtube.com/embed/_k2y8_AW4do" 
              title="YouTube video"
              frameborder="0" 
              allow="encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
          <video class="mi-video" autoplay loop muted playsinline>
            <source src="Cabrera.webm" type="video/webm">
            Tu navegador no soporta video transparente.
          </video>
          <video class="mi-videochime" autoplay loop muted playsinline>
            <source src="SillaVale.webm" type="video/webm">
            Tu navegador no soporta video transparente.
          </video>
          <img src="Images/Echoes1.png" class="Echoes1">
          <img src="Images/Echoes2.png" class="Echoes2">
          <img src="Images/Echoes3.png" class="Echoes3">
          

          <img src="Images/Nox.png" class="Nox">
          <img src="Images/NoxText.png" class="NoxTexto">
          <img src="Images/360.png" class="Panoramic">
          <img src="Images/NoxPoster.png" class="NoxPoster">
          <img src="Images/NoxRenders.png" class="NoxRenders">
          <img src="Images/ConceptTitle.png" class="Concept">
          <div class="video-container">
            <iframe 
              src="https://www.youtube.com/embed/rsPubY8bLgo" 
              title="YouTube video"
              frameborder="0" 
              allow="encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen>
            </iframe>
          </div>
          

  </div>
        </div>
        
      </div>

      <script>
        const toggleBtn = document.getElementById("themeToggle");
        const themeImage = document.getElementById("themeVideo");
        const aboutMe = document.querySelector(".About-Me");
        const sobreMiText = document.querySelector(".SobremiText");
        const blender = document.querySelector(".Blender");
        const estrellasBlender = document.querySelector(".estrellas-Blender");
        const estrellasClip = document.querySelector(".estrellas-Clip");
        const habilidadesBlender = document.querySelector(".habilidades-Blender");
        const substance = document.querySelector(".Substance");
        const estrellasSubstance = document.querySelector(".estrellas-Substance");
        const habilidadesSubstance = document.querySelector(".habilidades-Substance");
        const habilidadesClip = document.querySelector(".habilidades-Clip");
        const nox = document.querySelector(".Nox");
        const panoramic = document.querySelector(".Panoramic");
        const concept = document.querySelector(".Concept");
        const echoestitle = document.querySelector(".EchoesTitle");
        const clip = document.querySelector(".Clip");
        const SobremiTexto = document.querySelector(".SobremiTexto");
        const echoesTexto = document.querySelector(".EchoesTexto");
        const noxTexto = document.querySelector(".NoxTexto");

        function cambiarImagenSuave(imgElement, newSrc, duracion = 500) {
          // fade out
          imgElement.style.opacity = 0;

          setTimeout(() => {
            // cuando termina el fade out, cambiamos el src
            imgElement.src = newSrc;

            // esperamos a que la nueva imagen cargue antes de hacer fade in
            imgElement.onload = () => {
              imgElement.style.opacity = 1;
            };
          }, duracion);
        }

        function cambiarVideoSuave(videoElement, newSrc, duracion = 500) {
          // Guardar en qu√© segundo iba el video actual
          const tiempoActual = videoElement.currentTime;

          videoElement.style.opacity = 0;

          setTimeout(() => {
            videoElement.querySelector("source").src = newSrc;
            videoElement.load();

            // Cuando el nuevo video est√© listo, saltamos al tiempo guardado
            videoElement.onloadeddata = () => {
              // Verificamos que no exceda la duraci√≥n del nuevo video
              const nuevoTiempo = Math.min(tiempoActual, videoElement.duration || tiempoActual);
              videoElement.currentTime = nuevoTiempo;
              videoElement.play();
              videoElement.style.opacity = 1;
            };
          }, duracion);
        }

        
        let darkMode = false;

        toggleBtn.addEventListener("click", () => {
          darkMode = !darkMode;

          if (darkMode) {
            cambiarImagenSuave(toggleBtn,"Images/Luna.png");
            cambiarVideoSuave(themeVideo,"Images/CocinaDiaVideo.mp4");
            
          
            // aplicar clases de modo oscuro
            aboutMe.classList.add("light");
            sobreMiText.classList.add("light");
            blender.classList.add("light");
            habilidadesBlender.classList.add("light");
            estrellasBlender.classList.add("light");
            substance.classList.add("light");
            habilidadesSubstance.classList.add("light");
            habilidadesClip.classList.add("light");
            estrellasSubstance.classList.add("light");
            estrellasClip.classList.add("light");
            nox.classList.add("light");
            panoramic.classList.add("light");
            concept.classList.add("light");
            echoestitle.classList.add("light");
            clip.classList.add("light");
            SobremiTexto.classList.add("light");
            echoesTexto.classList.add("light");
            noxTexto.classList.add("light");

          } else {
            cambiarImagenSuave(toggleBtn,"Images/Sol.png");
            cambiarVideoSuave(themeVideo,"Images/CocinaNocheVideo.mp4");
          
            // aplicar clases de modo oscuro
            aboutMe.classList.remove("light");
            sobreMiText.classList.remove("light");
            blender.classList.remove("light");
            habilidadesBlender.classList.remove("light");
            estrellasBlender.classList.remove("light");
            substance.classList.remove("light");
            habilidadesSubstance.classList.remove("light");
            habilidadesClip.classList.remove("light");
            estrellasSubstance.classList.remove("light");
            estrellasClip.classList.remove("light");
            nox.classList.remove("light");
            panoramic.classList.remove("light");
            concept.classList.remove("light");
            echoestitle.classList.remove("light");
            clip.classList.remove("light");
            SobremiTexto.classList.remove("light");
            echoesTexto.classList.remove("light");
            noxTexto.classList.remove("light");
          }
        });
      </script>
      <script>
        function limitarResolucion() {
          if (window.innerWidth > 1440) {
            document.body.style.maxWidth = "1440px";   // l√≠mite
            document.body.style.margin = "0 auto";     // centrar
          } else {
            document.body.style.maxWidth = "100%";     // normal
            document.body.style.margin = "0";
          }
        }

        // ejecutar al cargar
        window.addEventListener("load", limitarResolucion);
        // ejecutar si redimensiona la ventana
        window.addEventListener("resize", limitarResolucion);
      </script>

      <script>
        function waitForVideo(videoElement) {
          return new Promise(resolve => {
            if (videoElement.readyState >= 3) {
              resolve(); // ya est√° listo
            } else {
              videoElement.addEventListener("canplaythrough", resolve, { once: true });
            }
          });
        }

        // Pre-cargar el video de d√≠a sin mostrarlo
        const videoDia = document.createElement("video");
        videoDia.src = "Images/CocinaDiaVideo.mp4";
        videoDia.preload = "auto";

        window.addEventListener("load", async () => {
          const preloader = document.getElementById("preloader");
          const videoNoche = document.getElementById("themeVideo");

          // esperar que ambos videos est√©n listos
          await Promise.all([
            waitForVideo(videoNoche),
            waitForVideo(videoDia)
          ]);

          // ocultar preloader
          preloader.classList.add("hidden");
        });
      </script>

      <script>
        function checkScreenWidth() {
          const rotateMessage = document.getElementById("rotateMessage");
          if (window.innerWidth < 425) {
            rotateMessage.style.display = "flex";
          } else {
            rotateMessage.style.display = "none";
          }
        }

        // Revisar en carga y al redimensionar
        window.addEventListener("load", checkScreenWidth);
        window.addEventListener("resize", checkScreenWidth);
      </script>

      <script type="module" src="./main.js"></script>
      <script src="golpe.js"></script>
    </body>




</html>
